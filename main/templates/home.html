<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>אריה</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    {% load static %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Suez+One&family=Nunito:wght@400;600;700&family=Assistant:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'main.css' %}?v=20250828" />
    <link rel="stylesheet" href="{% static 'home.css' %}?v=20250828" />
</head>
<body>
    {% include 'partials/header.html' %}
    <section class="hero" aria-label="תמונת באנר" {% if banner and banner.image %}style="background-image:url('{{ banner.image.url }}');"{% endif %}>
    </section>
    <div class="divider">
        מפעל טקסטיל לייצור, הדפסה ומיתוג בהתאמה אישית ובסיטונאות
        <span class="arrow" aria-hidden="true"></span>
    </div>
    <section class="gallery" id="services" aria-label="גלריית שירותים">
        <div class="gallery-grid">
            {# Six slots: figure/figcaption so text overlays center of image #}
            <figure class="g-item">
                <img src="{% if gallery and gallery.image1 %}{{ gallery.image1.url }}{% else %}https://placehold.co/370x250?text=1{% endif %}" alt="{{ gallery.caption1|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption1|default:'ייעוץ וליווי' }}</figcaption>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image2 %}{{ gallery.image2.url }}{% else %}https://placehold.co/370x250?text=2{% endif %}" alt="{{ gallery.caption2|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption2|default:'מיתוג' }}</figcaption>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image3 %}{{ gallery.image3.url }}{% else %}https://placehold.co/370x250?text=3{% endif %}" alt="{{ gallery.caption3|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption3|default:'תפירה לפי כמויות, סיטונאות' }}</figcaption>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image4 %}{{ gallery.image4.url }}{% else %}https://placehold.co/370x250?text=4{% endif %}" alt="{{ gallery.caption4|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption4|default:'ייצור' }}</figcaption>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image5 %}{{ gallery.image5.url }}{% else %}https://placehold.co/370x250?text=5{% endif %}" alt="{{ gallery.caption5|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption5|default:'תלייה' }}</figcaption>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image6 %}{{ gallery.image6.url }}{% else %}https://placehold.co/370x250?text=6{% endif %}" alt="{{ gallery.caption6|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption6|default:'הדפסה' }}</figcaption>
            </figure>
        </div>
                <div class="h-slider" aria-label="גלריה נעה אופקית">
                        <div class="track">
                                {% for s in slides %}
                                    <figure class="slide"><img src="{{ s.image.url }}" alt="{{ s.alt }}" loading="lazy" /></figure>
                                {% empty %}
                                    {% for i in "12345678" %}
                                        <figure class="slide"><img src="https://placehold.co/220x220?text={{ forloop.counter }}" alt="" loading="lazy" /></figure>
                                    {% endfor %}
                                {% endfor %}
                        </div>
                </div>
    </section>
        <script>
            (function(){
                const slider = document.querySelector('.h-slider');
                if(!slider) return;
                const track = slider.querySelector('.track');
                if(!track) return;
                // Clone the original set until content is >= 3x viewport width and >= 10 tiles
                const targetMultiplier = 3;        // how wide relative to viewport
                const minTilesTotal = 10;          // ensure enough tiles even on small screens
                const baseNodes = Array.from(track.children);
                const baseCount = baseNodes.length;
                if (baseCount === 0) return;

                const needByWidth = Math.ceil((slider.clientWidth * targetMultiplier) / track.scrollWidth);
                const repeats = Math.max(needByWidth, Math.ceil(minTilesTotal / baseCount));

                for (let r = 1; r < repeats; r++) {
                    for (const node of baseNodes) {
                        const clone = node.cloneNode(true);
                        clone.setAttribute('aria-hidden','true');
                        clone.classList.add('clone');
                        track.appendChild(clone);
                    }
                }
            })();
        </script>
    <section class="contact-wrap" id="contact" aria-label="טופס יצירת קשר">
        <div class="contact-inner">
            <div class="contact-form-card">
                <h2>השאירו פרטים ונחזור אליכם בהקדם</h2>
                <form method="post" novalidate>
                    {% csrf_token %}
                    <div class="grid">
                        <div class="field">{{ contact_form.full_name }}</div>
                        <div class="field">{{ contact_form.company }}</div>
                        <div class="field">{{ contact_form.email }}</div>
                        <div class="field">{{ contact_form.phone }}</div>
                        <div class="field full">{{ contact_form.message }}</div>
                    </div>
                    <button type="submit" class="send-btn">שלח</button>
                    {% if messages %}
                      <ul class="form-messages">{% for m in messages %}<li>{{ m }}</li>{% endfor %}</ul>
                    {% endif %}
                </form>
            </div>
            <div class="contact-visual" aria-hidden="true"></div>
        </div>
    </section>
    {% include 'partials/footer.html' %}
</body>
</html>
