<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <title>אריה</title>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    {% load static %}
    {% load site_blocks %}
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Suez+One&family=Nunito:wght@400;600;700&family=Assistant:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'main.css' %}?v=20250828" />
    <link rel="stylesheet" href="{% static 'home.css' %}?v=20250828" />
</head>
<body>
    {% include 'partials/header.html' %}
    <main id="main-content" tabindex="-1">
    {% hero 'home' %}
    <h1 class="sr-only">אריה טקסטיל – ייצור, מיתוג והדפסות</h1>
    <div class="divider divider-plain">כל רעיון הופך למציאות</div>
    <section class="gallery" id="services" aria-label="גלריית שירותים">
        <div class="gallery-grid">
            {# Six slots: figure/figcaption so text overlays center of image #}
            <figure class="g-item">
                <img src="{% if gallery and gallery.image1 %}{{ gallery.image1.url }}{% else %}https://placehold.co/370x250?text=1{% endif %}" alt="{{ gallery.caption1|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption1|default:'ייעוץ וליווי' }}</figcaption>
                <a class="g-link" href="{{ gallery.link1|resolve_link }}" aria-label="{{ gallery.caption1|default:'ייעוץ וליווי' }}"></a>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image2 %}{{ gallery.image2.url }}{% else %}https://placehold.co/370x250?text=2{% endif %}" alt="{{ gallery.caption2|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption2|default:'מיתוג' }}</figcaption>
                <a class="g-link" href="{{ gallery.link2|resolve_link }}" aria-label="{{ gallery.caption2|default:'מיתוג' }}"></a>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image3 %}{{ gallery.image3.url }}{% else %}https://placehold.co/370x250?text=3{% endif %}" alt="{{ gallery.caption3|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption3|default:'תפירה לפי כמויות, סיטונאות' }}</figcaption>
                <a class="g-link" href="{{ gallery.link3|resolve_link }}" aria-label="{{ gallery.caption3|default:'תפירה לפי כמויות, סיטונאות' }}"></a>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image4 %}{{ gallery.image4.url }}{% else %}https://placehold.co/370x250?text=4{% endif %}" alt="{{ gallery.caption4|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption4|default:'ייצור' }}</figcaption>
                <a class="g-link" href="{{ gallery.link4|resolve_link }}" aria-label="{{ gallery.caption4|default:'ייצור' }}"></a>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image5 %}{{ gallery.image5.url }}{% else %}https://placehold.co/370x250?text=5{% endif %}" alt="{{ gallery.caption5|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption5|default:'תלייה' }}</figcaption>
                <a class="g-link" href="{{ gallery.link5|resolve_link }}" aria-label="{{ gallery.caption5|default:'תלייה' }}"></a>
            </figure>
            <figure class="g-item">
                <img src="{% if gallery and gallery.image6 %}{{ gallery.image6.url }}{% else %}https://placehold.co/370x250?text=6{% endif %}" alt="{{ gallery.caption6|default:'' }}" loading="lazy" />
                <figcaption class="cap">{{ gallery.caption6|default:'הדפסה' }}</figcaption>
                <a class="g-link" href="{{ gallery.link6|resolve_link }}" aria-label="{{ gallery.caption6|default:'הדפסה' }}"></a>
            </figure>
        </div>
        <div class="gallery-cta">
            <a href="#contact" class="hero-cta" role="button" aria-label="להצעת מחיר">להצעת מחיר</a>
            <h2 class="about-teaser" aria-label="מי אנחנו">מי אנחנו</h2>
        </div>
    </section>
    <div class="slider-band">
        <div class="slider-head">
            <h2 class="slider-title">מהמוצרים שלנו</h2>
            <a class="slider-all" href="#products" aria-label="לכל המוצרים">לכל המוצרים</a>
        </div>
    <div class="h-slider" id="products" aria-label="גלריה נעה אופקית" aria-live="off">
            <div class="track">
                    {% for s in slides %}
                        <figure class="slide"><img src="{{ s.image.url }}" alt="{{ s.alt|default:'תמונת מוצר' }}" loading="lazy" /></figure>
                    {% empty %}
                        {% for i in "12345678" %}
                            <figure class="slide"><img src="https://placehold.co/220x220?text={{ forloop.counter }}" alt="" loading="lazy" /></figure>
                        {% endfor %}
                    {% endfor %}
            </div>
        </div>
    </div>
        <script>
            (function(){
                const slider = document.querySelector('.h-slider');
                if(!slider) return;
                const track = slider.querySelector('.track');
                if(!track) return;
                // Clone the original set until content is >= 3x viewport width and >= 10 tiles
                const targetMultiplier = 3;        // how wide relative to viewport
                const minTilesTotal = 10;          // ensure enough tiles even on small screens
                const baseNodes = Array.from(track.children);
                const baseCount = baseNodes.length;
                if (baseCount === 0) return;

                const needByWidth = Math.ceil((slider.clientWidth * targetMultiplier) / track.scrollWidth);
                const repeats = Math.max(needByWidth, Math.ceil(minTilesTotal / baseCount));

                for (let r = 1; r < repeats; r++) {
                    for (const node of baseNodes) {
                        const clone = node.cloneNode(true);
                        clone.setAttribute('aria-hidden','true');
                        clone.classList.add('clone');
                        track.appendChild(clone);
                    }
                }
                // Always animate by default; pausing is handled via global accessibility toggle
                track.style.animationPlayState = 'running';
                slider.setAttribute('aria-live','off');
            })();
        </script>
    {% include 'partials/contact_form.html' %}
    </main>
    {% include 'partials/footer.html' %}
</body>
</html>
