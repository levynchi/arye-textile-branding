{% load static %}
<a href="#main-content" class="skip-link">דלג לתוכן</a>
<header>
    <div class="nav-bar" role="navigation" aria-label="תפריט ראשי">
            <button class="menu-toggle" type="button" aria-label="פתח תפריט" aria-controls="site-menu" aria-expanded="false">
                <span class="hamburger" aria-hidden="true"></span>
            </button>
            <a href="{% url 'home' %}" class="logo" aria-label="עמוד הבית">
                <img src="{% static 'icons_logo/logo-arye.svg' %}" alt="לוגו אריה" />
            </a>
            <nav id="site-menu">
            <ul class="menu">
                <li><a href="{% url 'manufacturing' %}">ייצור</a></li>
                <li><a href="{% url 'branding' %}">מיתוג</a></li>
                <li><a href="{% url 'printing' %}">הדפסות</a></li>
                <li><a href="{% url 'fabrics' %}">בדים</a></li>
                <li><a href="{% url 'patternmaking' %}#patternmaking">תדמיתנות</a></li>
                <li><a href="{% url 'patternmaking' %}#cutting">גזירה</a></li>
                <li><a href="#products">גלריית תמונות</a></li>
                <li><a href="{% url 'about' %}">אודות</a></li>
            </ul>
        </nav>
    <a class="wa-link" href="https://wa.me/972542367535" target="_blank" rel="noopener noreferrer" aria-label="צ'אט וואטסאפ">
            <img src="{% static 'SVG ICONS/MEDIA-03.svg' %}" alt="WhatsApp" />
        </a>

    </div>
    <script>
    (function(){
        const header = document.currentScript.closest('header');
        const btn = header.querySelector('.menu-toggle');
        const menu = header.querySelector('#site-menu');
        if(!btn || !menu) return;
        const open = (v) => {
            header.classList.toggle('menu-open', v);
            btn.setAttribute('aria-expanded', String(v));
            btn.setAttribute('aria-label', v ? 'סגור תפריט' : 'פתח תפריט');
        };
        btn.addEventListener('click', ()=> open(!header.classList.contains('menu-open')));
        document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') open(false); });
        document.addEventListener('click', (e)=>{
            if(!header.classList.contains('menu-open')) return;
            if(header.contains(e.target)) return;
            open(false);
        });
        // Close menu after selecting a link (mobile UX)
        menu.addEventListener('click', (e)=>{
            if(e.target.closest('a')) open(false);
        });
        const mq = window.matchMedia('(min-width: 769px)');
        mq.addEventListener('change', () => { if(mq.matches) open(false); });
    })();
    </script>
</header>
